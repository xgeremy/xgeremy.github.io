<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consentimiento Informado - XGEREMY™</title>
  <link rel="icon" type="image/png" href="https://i.imgur.com/cFOFY4I.png">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <!-- DM Sans — non-blocking async font load -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&display=swap" media="print" onload="this.media='all'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet"></noscript>

  <style>
    
/* ══════════════════════════════════════════════════════════════
   XGEREMY — Premium Glass Design System v3
   DM Sans typography · Liquid glass · Light / Dark mode
══════════════════════════════════════════════════════════════ */

/* ── DARK MODE (default) ── */
:root {
  --font: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;

  --bg:       #050505;
  --bg-2:     #0f0f0f;
  --bg-3:     #1a1a1a;
  --text:     #f5f5f7;
  --text-2:   #86868b;
  --text-3:   #6e6e73;
  --border:   rgba(255,255,255,0.09);
  --accent:   #c8b89a;

  /* Glass */
  --glass-bg:    rgba(255,255,255,0.065);
  --glass-bg-2:  rgba(255,255,255,0.042);
  --glass-blur:  28px;
  --glass-blur2: 20px;
  --glass-sat:   1.85;
  --glass-bdr:   rgba(255,255,255,0.105);
  --glass-bdr-h: rgba(255,255,255,0.22);
  --glass-r:     20px;
  --glass-r2:    18px;
  --glass-r3:    14px;
  --glass-spec:  rgba(255,255,255,0.20);
  /* Chromatic */
  --ch-blue:   rgba(100,190,255,0.055);
  --ch-violet: rgba(150,90,255,0.045);
  --ch-pink:   rgba(255,110,200,0.038);
  --ch-green:  rgba(80,255,170,0.025);

  /* Nav accent */
  --nav-bg: rgba(10,10,10,0.82);

  /* Theme toggle icon */
  --theme-icon: "☀️";

  /* Puntos accent — neutral instead of green */
  --pts: rgba(200,184,154,0.85);
  --pts-dim: rgba(200,184,154,0.18);
  --pts-border: rgba(200,184,154,0.22);
}

/* ── LIGHT MODE ── */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }

body {
  font-family: var(--font);
  font-optical-sizing: auto;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background .35s ease, color .35s ease;
}

/* ── SVG FILTER EMBED (Z1Code/glass-refraction MIT) ── */
#xg-filters { position:absolute; width:0; height:0; overflow:hidden; }

/* ── GRAIN ── */
#xg-grain {
  position:fixed; inset:-50%; width:200%; height:200%;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='f'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23f)'/%3E%3C/svg%3E");
  opacity:.018; pointer-events:none; z-index:500;
  animation:xg-grain .5s steps(2) infinite;
}
@keyframes xg-grain {
  0%,100%{transform:translate(0,0)} 25%{transform:translate(-1%,2%)}
  50%{transform:translate(2%,-1%)} 75%{transform:translate(-1%,1%)}
}

/* ── GLASS CARD ── */
.xg-card {
  position:relative;
  background:linear-gradient(145deg, var(--glass-bg), var(--glass-bg-2));
  backdrop-filter:blur(var(--glass-blur2)) saturate(var(--glass-sat));
  -webkit-backdrop-filter:blur(var(--glass-blur2)) saturate(var(--glass-sat));
  border:1px solid var(--glass-bdr);
  border-radius:var(--glass-r2);
  overflow:hidden;
  transition:transform .55s cubic-bezier(.16,1,.3,1),
             border-color .4s,
             box-shadow .5s;
}
.xg-card::before {
  content:'';
  position:absolute; top:0; left:0; right:0; height:1px;
  background:linear-gradient(90deg, transparent, var(--glass-spec) 45%, rgba(255,255,255,.08) 60%, transparent);
  pointer-events:none;
}
.xg-card:hover {
  transform:translateY(-4px);
  border-color:var(--glass-bdr-h);
  box-shadow:0 32px 64px rgba(0,0,0,.28),
    inset 1px 1px 0 var(--ch-blue),
    inset -1px -1px 0 var(--ch-violet),
    inset 1px -1px 0 var(--ch-pink),
    inset -1px 1px 0 var(--ch-green);
}

/* ── GLASS BUTTON ── */
.xg-btn {
  position:relative;
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:12px 24px;
  background:linear-gradient(145deg, var(--glass-bg), var(--glass-bg-2));
  backdrop-filter:blur(20px) saturate(var(--glass-sat));
  -webkit-backdrop-filter:blur(20px) saturate(var(--glass-sat));
  border:1px solid var(--glass-bdr);
  border-radius:var(--glass-r3);
  color:var(--text);
  font-family:var(--font);
  font-size:15px; font-weight:500; letter-spacing:-.01em;
  text-decoration:none; cursor:pointer;
  overflow:hidden;
  transition:transform .4s cubic-bezier(.16,1,.3,1),
             border-color .3s, box-shadow .4s;
}
.xg-btn::before {
  content:'';
  position:absolute; top:0; left:0; right:0; height:1px;
  background:linear-gradient(90deg, transparent, var(--glass-spec) 50%, transparent);
  pointer-events:none;
}
.xg-btn::after {
  content:'';
  position:absolute; inset:0;
  background:linear-gradient(108deg, transparent 28%, rgba(255,255,255,.06) 50%, transparent 72%);
  background-size:220% 100%;
  animation:xg-shimmer 6s ease-in-out infinite;
  pointer-events:none;
}
.xg-btn:hover {
  transform:translateY(-2px);
  border-color:var(--glass-bdr-h);
  box-shadow:0 16px 40px rgba(0,0,0,.22),
    inset 1px 1px 0 var(--ch-blue),
    inset -1px -1px 0 var(--ch-violet);
}
.xg-btn span { position:relative; z-index:1; }

/* ── GLASS BUTTON — SOLID (primary CTA) ── */
.xg-btn-solid {
  position:relative;
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:12px 24px;
  background:var(--text);
  color:var(--bg);
  border:1px solid transparent;
  border-radius:var(--glass-r3);
  font-family:var(--font);
  font-size:15px; font-weight:600; letter-spacing:-.01em;
  text-decoration:none; cursor:pointer;
  overflow:hidden;
  transition:transform .4s cubic-bezier(.16,1,.3,1), opacity .3s, box-shadow .4s;
}
.xg-btn-solid:hover { transform:translateY(-2px); opacity:.88; box-shadow:0 12px 32px rgba(0,0,0,.22); }

/* ── NAV — always visible glass pill ── */
header {
  position:fixed; top:14px; left:50%;
  transform:translateX(-50%);
  width:calc(100% - 48px); max-width:980px;
  z-index:9999;
  display:flex; align-items:center;
  padding:0 8px;
  height:52px;
  background:linear-gradient(140deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));
  backdrop-filter:blur(28px) saturate(1.85) brightness(1.06);
  -webkit-backdrop-filter:blur(28px) saturate(1.85) brightness(1.06);
  border:1px solid var(--glass-bdr);
  border-radius:18px;
  transition:background .35s, border-color .35s;
  /* NO auto-hide — always visible */
}
header::before {
  content:'';
  position:absolute; top:0; left:0; right:0; height:1px;
  background:linear-gradient(90deg, transparent, var(--glass-spec) 50%, transparent);
  border-radius:18px 18px 0 0;
  pointer-events:none;
}
.header-content {
  width:100%; display:flex; justify-content:space-between; align-items:center;
  padding:0 12px;
}
.logo {
  font-size:16px; font-weight:700; letter-spacing:.04em;
  text-transform:uppercase;
  color:var(--text); text-decoration:none;
  display:flex; align-items:center; gap:10px;
  transition:opacity .3s;
}
.logo:hover { opacity:.7; }
.logo-img { height:26px; width:auto; opacity:.9; }
.logo sup { font-size:9px; font-weight:400; opacity:.5; }

nav { display:flex; gap:6px; align-items:center; }
nav a {
  color:var(--text); text-decoration:none;
  font-size:13px; font-weight:400; letter-spacing:-.01em;
  opacity:.65; padding:7px 12px;
  border-radius:10px;
  transition:opacity .3s, background .3s;
}
nav a:hover { opacity:1; background:rgba(255,255,255,0.07); }
.nav-agendar {
  margin-left:4px;
  padding:8px 16px !important;
  background:var(--text) !important;
  color:var(--bg) !important;
  border-radius:11px;
  font-weight:600 !important;
  font-size:13px !important;
  letter-spacing:-.01em !important;
  opacity:1 !important;
  transition:opacity .3s, transform .3s !important;
}
.nav-agendar:hover { opacity:.85 !important; transform:translateY(-1px); background:var(--text) !important; }

.back-link {
  color:var(--text); text-decoration:none;
  font-size:13px; opacity:.6;
  padding:7px 12px; border-radius:10px;
  transition:opacity .3s, background .3s;
}
.back-link:hover { opacity:1; background:rgba(255,255,255,.07); }



/* ── ANIMATIONS ── */
@keyframes xg-shimmer {
  0%{background-position:-100% 0} 100%{background-position:320% 0}
}
@keyframes xg-specular {
  0%{opacity:.6} 100%{opacity:1}
}
@keyframes fadeInUp {
  from{opacity:0;transform:translateY(22px)} to{opacity:1;transform:translateY(0)}
}
@keyframes fadeIn {
  from{opacity:0} to{opacity:1}
}
.fade-in {
  opacity:0; transform:translateY(20px);
  transition:opacity .9s cubic-bezier(.16,1,.3,1), transform .9s cubic-bezier(.16,1,.3,1);
}
.fade-in.visible { opacity:1; transform:translateY(0); }

/* ── GALLERY — animated shiny border ── */

.gallery-item {
  aspect-ratio:1080/1350;
  border-radius:18px; overflow:visible; position:relative;
  transition:transform .45s cubic-bezier(.16,1,.3,1), box-shadow .45s;
  background:var(--bg-2);
}
.gallery-item .gi-inner {
  position:absolute; inset:0;
  border-radius:18px; overflow:hidden;
}
.gallery-item .gi-inner img {
  width:100%; height:100%; object-fit:cover;
  display:block;
}
.gallery-item::before { display:none; }

}
/* Glass overlay shine */
.gallery-item::after {
  content:'';
  position:absolute; inset:0;
  border-radius:18px;
  background:linear-gradient(180deg,
    rgba(255,255,255,.14) 0%,
    rgba(255,255,255,.04) 30%,
    transparent 60%
  );
  opacity:0;
  transition:opacity .4s;
  z-index:3; pointer-events:none;
}
.gallery-item:hover::after { opacity:1; }
.gallery-item:hover { transform:scale(1.025); box-shadow:0 28px 56px rgba(0,0,0,.5); }

/* ── FOOTER ── */
footer {
  background:var(--bg);
  border-top:1px solid var(--border);
  padding:60px 22px 40px;
  transition:background .35s;
}
.footer-content { max-width:980px; margin:0 auto; }
.footer-grid { display:grid; grid-template-columns:2fr 1fr 1fr; gap:60px; margin-bottom:40px; }
.footer-brand h3 { font-size:22px; font-weight:700; margin-bottom:12px; letter-spacing:.04em; text-transform:uppercase; }
.footer-brand p { font-size:14px; color:var(--text-2); line-height:1.6; }
.footer-links h4 { font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:.08em; margin-bottom:16px; color:var(--text-2); }
.footer-links a { display:block; font-size:14px; color:var(--text-2); text-decoration:none; margin-bottom:10px; transition:color .3s; }
.footer-links a:hover { color:var(--text); }
.footer-bottom { text-align:center; padding-top:36px; border-top:1px solid var(--border); }
.footer-bottom p { font-size:12px; color:var(--text-3); }

/* ── SCROLL TOP ── */
.scroll-top {
  position:fixed; bottom:32px; right:32px;
  width:48px; height:48px; border-radius:50%;
  background:var(--glass-bg);
  backdrop-filter:blur(16px);
  border:1px solid var(--glass-bdr);
  color:var(--text); display:flex; align-items:center; justify-content:center;
  font-size:18px; opacity:0; pointer-events:none;
  transition:all .35s cubic-bezier(.16,1,.3,1); z-index:1000;
}
.scroll-top.visible { opacity:1; pointer-events:all; }
.scroll-top:hover { transform:translateY(-4px); border-color:var(--glass-bdr-h); }

/* ── THEME JS ── */

    body { line-height:1.5; }

    .container { max-width:800px; margin:0 auto; padding:100px 22px 60px; }

    .document-header {
      text-align:center; margin-bottom:40px; padding-bottom:28px;
      border-bottom:1px solid var(--border);
    }
    .document-header h1 {
      font-size:32px; font-weight:700; letter-spacing:-.02em; margin-bottom:10px;
      background:linear-gradient(135deg, var(--text) 0%, var(--text-2) 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
    }
    .document-header .date { font-size:13px; color:var(--text-2); }

    .form-section, .content-section {
      padding:28px; margin-bottom:16px;
    }
    .form-section h2, .content-section h3 {
      font-size:19px; font-weight:600; margin-bottom:18px; color:var(--text);
    }
    .form-group { margin-bottom:18px; }
    .form-group label {
      display:block; font-size:13px; font-weight:500;
      margin-bottom:7px; color:var(--text-2);
    }
    .form-group input, .form-group textarea {
      width:100%; padding:11px 14px;
      background:var(--glass-bg); border:1px solid var(--glass-bdr);
      border-radius:10px; color:var(--text);
      font-size:14px; font-family:var(--font); transition:all .3s;
    }
    .form-group input:focus, .form-group textarea:focus {
      outline:none; border-color:var(--glass-bdr-h);
      background:rgba(255,255,255,.09);
      box-shadow:0 0 0 3px rgba(255,255,255,.04);
    }
    .form-row { display:grid; grid-template-columns:1fr 1fr; gap:14px; }

    .content-section ul { list-style:none; padding-left:0; }
    .content-section li {
      padding-left:22px; position:relative; margin-bottom:10px;
      color:var(--text-2); font-size:14px; line-height:1.65;
    }
    .content-section li::before {
      content:'→'; position:absolute; left:0;
      color:var(--accent); font-size:13px; top:2px;
    }

    .warning-box {
      background:rgba(255,59,48,.07); border:1px solid rgba(255,59,48,.22);
      border-radius:10px; padding:16px; margin:18px 0;
    }
    .warning-box p { color:#ff3b30; font-size:13px; line-height:1.6; margin:0; }

    .signature-section {
      padding:28px; margin-top:24px;
    }
    .signature-section h2 {
      font-size:19px; font-weight:600; margin-bottom:14px; color:var(--text);
    }
    .signature-pad {
      width:100%; height:190px;
      background:rgba(255,255,255,.96); border:1px solid var(--glass-bdr);
      border-radius:10px; cursor:crosshair; margin-bottom:14px; display:block;
    }
    .signature-controls { display:flex; gap:10px; justify-content:flex-end; }

    .btn {
      padding:11px 22px; border-radius:var(--glass-r3);
      font-size:14px; font-weight:500; cursor:pointer;
      transition:all .3s; border:none; font-family:var(--font);
    }
    .btn-secondary {
      background:var(--glass-bg); color:var(--text); border:1px solid var(--glass-bdr);
      backdrop-filter:blur(12px);
    }
    .btn-secondary:hover { border-color:var(--glass-bdr-h); transform:translateY(-1px); }
    .btn-primary {
      background:var(--text); color:var(--bg);
    }
    .btn-primary:hover { opacity:.85; transform:translateY(-1px); }
    .btn-primary:disabled { opacity:.4; cursor:not-allowed; transform:none; }

    .checkbox-group { margin:20px 0; }
    .checkbox-label {
      display:flex; align-items:flex-start; gap:12px; cursor:pointer;
      padding:14px; background:var(--glass-bg); border:1px solid transparent;
      border-radius:10px; margin-bottom:8px; transition:all .3s;
    }
    .checkbox-label:hover { border-color:var(--glass-bdr); }
    .checkbox-label input[type="checkbox"] { width:18px; height:18px; margin-top:2px; cursor:pointer; }
    .checkbox-label span { font-size:13px; color:var(--text-2); line-height:1.6; }

    .success-message {
      background:rgba(48,209,88,.07); border:1px solid rgba(48,209,88,.22);
      border-radius:10px; padding:18px; text-align:center; display:none; margin-top:18px;
    }
    .success-message.show { display:block; }
    .success-message p { color:#30d158; font-size:14px; line-height:1.6; }

    .loading { display:none; text-align:center; padding:18px; color:var(--text-2); }
    .loading.show { display:block; }
    .spinner {
      border:3px solid var(--glass-bdr); border-top:3px solid var(--text);
      border-radius:50%; width:38px; height:38px;
      animation:xg-spin 1s linear infinite; margin:0 auto 10px;
    }
    @keyframes xg-spin { to{ transform:rotate(360deg); } }

    .error-message {
      background:rgba(255,59,48,.07); border:1px solid rgba(255,59,48,.22);
      border-radius:10px; padding:18px; text-align:center; display:none; margin-top:18px;
    }
    .error-message.show { display:block; }
    .error-message p { color:#ff3b30; font-size:14px; }

    footer {
      text-align:center; padding:36px 22px;
      border-top:1px solid var(--border); margin-top:48px;
      background:var(--bg); transition:background .35s;
    }
    footer p { font-size:12px; color:var(--text-3); }

    @media(max-width:734px){
      header { width:calc(100% - 20px); top:10px; }
      .form-row { grid-template-columns:1fr; }
      .signature-controls { flex-direction:column; }
      .btn { width:100%; }
    }
  </style>
</head>
<body>
  
  <svg id="xg-filters" aria-hidden="true">
    <defs>
      <filter id="xg-gr" x="-10%" y="-10%" width="120%" height="120%">
        <feTurbulence type="fractalNoise" baseFrequency="0.015 0.012" numOctaves="2" seed="42" result="noise"/>
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="8" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
    </defs>
  </svg>
  <div id="xg-grain"></div>

  
        <header>
      <div class="header-content">
        <a href="/" class="logo">
          <img src="https://i.imgur.com/cFOFY4I.png" alt="XGEREMY Logo" class="logo-img">
          XGEREMY<sup>™</sup>
        </a>
        <nav>
          <a href="/" class="back-link">← Volver al inicio</a>
        </nav>
      </div>
    </header>

  <div class="container">
    <div class="document-header">
      <h1>Consentimiento Informado</h1>
      <p class="date">Documento con validez legal en Chile</p>
    </div>

    <form id="consentForm">
      <div class="form-section xg-card">
        <h2>Datos del Procedimiento</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="fecha">Fecha</label>
            <input type="date" id="fecha" name="fecha" required>
          </div>
          <div class="form-group">
            <label for="tatuador">Tatuador</label>
            <input type="text" id="tatuador" name="tatuador" value="Geremy Monsalve (XGEREMY)" readonly>
          </div>
        </div>
        <div class="form-group">
          <label for="tatuaje">Descripción del tatuaje y zona</label>
          <input type="text" id="tatuaje" name="tatuaje" placeholder="Ej: Mandala en antebrazo derecho" required>
        </div>
        <div class="form-group">
          <label for="valor">Valor acordado (CLP)</label>
          <input type="text" id="valor" name="valor" placeholder="Ej: \$150.000" required>
        </div>
      </div>

      <div class="form-section xg-card">
        <h2>Identificación del Cliente</h2>
        <div class="form-group">
          <label for="nombre">Nombre completo</label>
          <input type="text" id="nombre" name="nombre" required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="rut">RUT / DNI / Pasaporte</label>
            <input type="text" id="rut" name="rut" placeholder="12.345.678-9" required>
          </div>
          <div class="form-group">
            <label for="fechaNacimiento">Fecha de nacimiento</label>
            <input type="date" id="fechaNacimiento" name="fecha_nacimiento" required>
          </div>
        </div>
        <div class="form-group">
          <label for="telefono">Teléfono de contacto</label>
          <input type="tel" id="telefono" name="telefono" placeholder="+56 9 1234 5678" required>
        </div>
        <div class="form-group">
          <label for="email">Correo electrónico del cliente</label>
          <input type="email" id="email" name="email" placeholder="cliente@ejemplo.com" required>
        </div>
      </div>

      <div class="content-section xg-card">
        <h3>Cuidados Antes del Tatuaje</h3>
        <ul>
          <li>No tomar sol ni rayos UVA en las 48 horas previas</li>
          <li>No consumir alcohol, aspirinas ni anticoagulantes 24 horas antes</li>
          <li>Si está tomando medicamentos, consulte con su médico antes del procedimiento</li>
          <li>Asistir bien alimentado e hidratado</li>
        </ul>
      </div>

      <div class="content-section xg-card">
        <h3>Cuidados Posteriores al Tatuaje</h3>
        <ul>
          <li>Mantener el vendaje entre 2-4 horas, retirar con manos limpias</li>
          <li>Lavar 2-3 veces al día con agua tibia y jabón neutro durante 10-14 días</li>
          <li>Aplicar crema cicatrizante recomendada en capa delgada</li>
          <li>NO rascar ni quitar las costras que se formen</li>
          <li>NO sumergirse en piscinas, mar, tinas o saunas por 2-3 semanas</li>
          <li>NO exponer al sol directo durante el primer mes</li>
          <li>NO usar ropa ajustada que roce la zona</li>
          <li>Evitar ejercicio intenso durante los primeros 5 días</li>
        </ul>
      </div>

      <div class="content-section xg-card">
        <h3>Riesgos y Complicaciones Posibles</h3>
        <div class="warning-box">
          <p><strong>IMPORTANTE:</strong> El tatuaje es una intervención en la piel que puede presentar:</p>
        </div>
        <ul>
          <li>Reacciones alérgicas a pigmentos (poco frecuente)</li>
          <li>Enrojecimiento e inflamación temporal (normal)</li>
          <li>Infección si no se siguen los cuidados adecuados</li>
          <li>Cicatrización queloide en personas predispuestas</li>
          <li>Granulomas o reacciones dérmicas</li>
        </ul>
        <p style="margin-top:14px;color:var(--text-2);font-size:13px;">
          <strong>En caso de complicaciones:</strong> Contactar inmediatamente al tatuador y acudir a un médico dermatólogo.
        </p>
      </div>

      <div class="content-section xg-card">
        <h3>Contraindicaciones</h3>
        <p style="margin-bottom:14px;color:var(--text-2);font-size:13px;">NO se debe realizar tatuaje si presenta:</p>
        <ul>
          <li>Enfermedades que disminuyen las defensas (VIH, diabetes no controlada)</li>
          <li>Dermatitis activa, acné severo, psoriasis en la zona</li>
          <li>Tendencia a cicatrización queloide</li>
          <li>Toma de anticoagulantes o problemas de coagulación</li>
          <li>Enfermedades cardíacas congénitas o uso de marcapasos</li>
          <li>Embarazo o lactancia</li>
          <li>Infecciones cutáneas activas</li>
        </ul>
        <div class="form-group" style="margin-top:18px;">
          <label for="observaciones">Observaciones adicionales (alergias, condiciones médicas, medicamentos)</label>
          <textarea id="observaciones" name="observaciones" rows="3" placeholder="Indique aquí cualquier condición médica relevante..."></textarea>
        </div>
      </div>

      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" name="acepta_informacion" required>
          <span>Declaro haber leído y comprendido toda la información contenida en este documento</span>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" name="acepta_estado_salud" required>
          <span>Confirmo que he informado al tatuador sobre mi estado de salud y cualquier condición médica relevante</span>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" name="acepta_cuidados" required>
          <span>Me comprometo a seguir todas las indicaciones de cuidado proporcionadas</span>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" name="acepta_resultado" required>
          <span>Acepto que el resultado final del tatuaje puede variar según mi tipo de piel y proceso de cicatrización</span>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" name="acepta_mayoria_edad" required>
          <span>Confirmo ser mayor de 18 años (o contar con autorización notarial de mis padres/tutor legal si tengo 16-17 años)</span>
        </label>
      </div>

      <div class="signature-section xg-card">
        <h2>Firma del Cliente</h2>
        <p style="margin-bottom:14px;color:var(--text-2);font-size:13px;">Firme en el recuadro a continuación con su dedo o stylus</p>
        <canvas id="signaturePad" class="signature-pad"></canvas>
        <div class="signature-controls">
          <button type="button" class="btn btn-secondary" id="clearBtn">Limpiar firma</button>
          <button type="submit" class="btn btn-primary" id="submitBtn" disabled>Firmar y enviar</button>
        </div>
      </div>

      <div class="loading" id="loadingMessage">
        <div class="spinner"></div>
        <p>Generando PDF y enviando emails...<br>Esto puede tomar unos segundos</p>
      </div>
      <div class="success-message" id="successMessage">
        <p><strong>✓ ¡Consentimiento enviado exitosamente!</strong><br><br>
        Se ha enviado un email con el PDF a:<br>
        <span id="emailSent" style="font-weight:600;"></span><br><br>
        También se envió una copia a geremymons@gmail.com</p>
      </div>
      <div class="error-message" id="errorMessage">
        <p><strong>✗ Error al enviar</strong><br>Por favor, intenta nuevamente o contacta al tatuador</p>
      </div>
    </form>

    <footer>
      <p>XGEREMY<sup>™</sup> · Be Different.</p>
      <p style="margin-top:8px;">Copyright © 2026 XGEREMY. Todos los derechos reservados.</p>
      <p style="margin-top:10px;font-size:11px;">Este documento tiene validez legal en Chile conforme a la Ley N° 19.628 y la Ley N° 19.799.</p>
    </footer>
  </div>

  <script>
    
  


    const canvas = document.getElementById('signaturePad');
    const ctx = canvas.getContext('2d');
    let isDrawing = false, hasSignature = false;
    function resizeCanvas() {
      const r = Math.max(window.devicePixelRatio||1,1);
      canvas.width = canvas.offsetWidth*r; canvas.height = canvas.offsetHeight*r;
      ctx.scale(r,r); ctx.strokeStyle='#000'; ctx.lineWidth=2.5; ctx.lineCap='round'; ctx.lineJoin='round';
    }
    resizeCanvas(); window.addEventListener('resize', resizeCanvas);
    function getPos(e) {
      const rect=canvas.getBoundingClientRect();
      return { x:(e.touches?e.touches[0].clientX:e.clientX)-rect.left, y:(e.touches?e.touches[0].clientY:e.clientY)-rect.top };
    }
    canvas.addEventListener('mousedown', e=>{ isDrawing=true; const p=getPos(e); ctx.beginPath(); ctx.moveTo(p.x,p.y); e.preventDefault(); });
    canvas.addEventListener('mousemove', e=>{ if(!isDrawing) return; const p=getPos(e); ctx.lineTo(p.x,p.y); ctx.stroke(); hasSignature=true; updateBtn(); e.preventDefault(); });
    canvas.addEventListener('mouseup', ()=>isDrawing=false);
    canvas.addEventListener('mouseout', ()=>isDrawing=false);
    canvas.addEventListener('touchstart', e=>{ isDrawing=true; const p=getPos(e); ctx.beginPath(); ctx.moveTo(p.x,p.y); e.preventDefault(); });
    canvas.addEventListener('touchmove', e=>{ if(!isDrawing) return; const p=getPos(e); ctx.lineTo(p.x,p.y); ctx.stroke(); hasSignature=true; updateBtn(); e.preventDefault(); });
    canvas.addEventListener('touchend', ()=>isDrawing=false);
    document.getElementById('clearBtn').addEventListener('click', ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); hasSignature=false; updateBtn(); });
    function updateBtn() {
      const form=document.getElementById('consentForm');
      const inputs=form.querySelectorAll('input[required],textarea[required]');
      let ok=true;
      inputs.forEach(i=>{ if(i.type==='checkbox'&&!i.checked) ok=false; else if(i.type!=='checkbox'&&!i.value.trim()) ok=false; });
      document.getElementById('submitBtn').disabled=!(ok&&hasSignature);
    }
    document.getElementById('consentForm').addEventListener('input', updateBtn);
    document.getElementById('consentForm').addEventListener('change', updateBtn);
    document.getElementById('fecha').valueAsDate = new Date();

    document.getElementById('consentForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      document.getElementById('successMessage').classList.remove('show');
      document.getElementById('errorMessage').classList.remove('show');
      document.getElementById('loadingMessage').classList.add('show');
      document.getElementById('submitBtn').disabled=true;
      const fd = {
        fecha:document.getElementById('fecha').value,
        tatuador:document.getElementById('tatuador').value,
        tatuaje:document.getElementById('tatuaje').value,
        valor:document.getElementById('valor').value,
        nombre:document.getElementById('nombre').value,
        rut:document.getElementById('rut').value,
        fechaNacimiento:document.getElementById('fechaNacimiento').value,
        telefono:document.getElementById('telefono').value,
        email:document.getElementById('email').value,
        observaciones:document.getElementById('observaciones').value
      };
      try {
        const {jsPDF}=window.jspdf; const doc=new jsPDF();
        const m=20,lh=7,pw=doc.internal.pageSize.getWidth(); let y=m;
        doc.setFontSize(18); doc.setFont(undefined,'bold');
        doc.text('CONSENTIMIENTO INFORMADO',pw/2,y,{align:'center'}); y+=10;
        doc.setFontSize(10); doc.setFont(undefined,'normal');
        doc.text('XGEREMY™ - Geremy Monsalve',pw/2,y,{align:'center'}); y+=15;
        const sections=[
          ['DATOS DEL PROCEDIMIENTO',[`Fecha: ${fd.fecha}`,`Tatuador: ${fd.tatuador}`,`Tatuaje: ${fd.tatuaje}`,`Valor: ${fd.valor}`]],
          ['IDENTIFICACION DEL CLIENTE',[`Nombre: ${fd.nombre}`,`RUT: ${fd.rut}`,`Nacimiento: ${fd.fechaNacimiento}`,`Teléfono: ${fd.telefono}`,`Email: ${fd.email}`]]
        ];
        sections.forEach(([title,lines])=>{
          doc.setFontSize(12); doc.setFont(undefined,'bold'); doc.text(title,m,y); y+=lh;
          doc.setFontSize(10); doc.setFont(undefined,'normal');
          lines.forEach(l=>{ doc.text(l,m,y); y+=lh; }); y+=5;
        });
        if(fd.observaciones){ doc.setFontSize(12); doc.setFont(undefined,'bold'); doc.text('OBSERVACIONES',m,y); y+=lh; doc.setFontSize(9); doc.setFont(undefined,'normal'); doc.splitTextToSize(fd.observaciones,pw-m*2).forEach(l=>{ doc.text(l,m,y); y+=lh-1; }); y+=5; }
        if(y>220){ doc.addPage(); y=m; }
        doc.setFontSize(12); doc.setFont(undefined,'bold'); doc.text('FIRMA DEL CLIENTE',m,y); y+=lh+5;
        const tc=document.createElement('canvas'); tc.width=canvas.width; tc.height=canvas.height;
        const tc2=tc.getContext('2d'); tc2.fillStyle='#fff'; tc2.fillRect(0,0,tc.width,tc.height); tc2.drawImage(canvas,0,0);
        doc.addImage(tc.toDataURL('image/jpeg',1.0),'JPEG',m,y,80,30); y+=40;
        doc.setFontSize(9); doc.text(`Firmado el: ${new Date().toLocaleString('es-CL')}`,m,y);
        const pdfBase64=doc.output('datauristring');
        await fetch('https://script.google.com/macros/s/AKfycbwbAaleU1DG2RirKGeZJdhaFS4IivGmpAhQtBPSgZ3iZ6ZJ-KGDjLU78mWdptSW2hqXBA/exec',{
          method:'POST', mode:'no-cors', headers:{'Content-Type':'application/json'},
          body:JSON.stringify({nombre:fd.nombre,email:fd.email,fecha:fd.fecha,tatuaje:fd.tatuaje,valor:fd.valor,pdfBase64})
        });
        document.getElementById('loadingMessage').classList.remove('show');
        document.getElementById('emailSent').textContent=fd.email;
        document.getElementById('successMessage').classList.add('show');
        window.scrollTo({top:0,behavior:'smooth'});
        setTimeout(()=>{
          document.getElementById('consentForm').reset();
          ctx.clearRect(0,0,canvas.width,canvas.height); hasSignature=false; updateBtn();
          document.getElementById('successMessage').classList.remove('show');
          document.getElementById('fecha').valueAsDate=new Date();
        },5000);
      } catch(err) {
        console.error(err);
        document.getElementById('loadingMessage').classList.remove('show');
        document.getElementById('errorMessage').classList.add('show');
        document.getElementById('submitBtn').disabled=false;
      }
    });
  
  // Scroll reveal
  (function(){
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => { if(e.isIntersecting){ e.target.classList.add('visible'); obs.unobserve(e.target); } });
    }, { threshold: 0.08 });
    document.querySelectorAll('.fade-in').forEach(el => obs.observe(el));
  })();
</script>
</body>
</html>